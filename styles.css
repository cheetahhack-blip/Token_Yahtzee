:root { --bg:#0f1115; --fg:#e8e8ea; --muted:#a9acb2; --card:#171a21; --line:#2a2f3a; }
* { box-sizing: border-box; }
body { margin:0; font-family: system-ui, -apple-system, "Segoe UI", sans-serif; background:var(--bg); color:var(--fg); }
.topbar { display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid var(--line); position:sticky; top:0; background:rgba(15,17,21,.95); backdrop-filter: blur(8px); }
.title { font-weight:700; }
.meta { color:var(--muted); font-size: 14px; }

.wrap { max-width: 980px; margin: 0 auto; padding: 16px; display:grid; gap: 16px; grid-template-columns: 1fr; }
@media (min-width: 960px){ .wrap { grid-template-columns: 1fr 1fr; } .panel:last-child { grid-column: 1 / -1; } }

.panel { background:var(--card); border:1px solid var(--line); border-radius:14px; padding:14px; }
h2 { margin: 0 0 10px; font-size: 16px; color: var(--muted); font-weight: 600; }

.diceRow { display:flex; gap:10px; flex-wrap: wrap; }
.die {
  width:64px; height:64px; display:grid; place-items:center;
  border-radius: 14px; border: 1px solid var(--line);
  background: #10131a; cursor: pointer;
  font-size: 22px; font-weight: 800;
  user-select:none;
}
.die.held { outline: 2px solid #ffffff33; background:#121827; }
.die .sub { font-size: 11px; color: var(--muted); font-weight: 600; margin-top:2px; }

.controls { margin-top: 12px; display:flex; gap: 10px; flex-wrap:wrap; }
.btn { padding: 10px 12px; border-radius: 12px; border:1px solid var(--line); background:#10131a; color:var(--fg); cursor:pointer; }
.btn.primary { background:#1b2233; }
.btn:disabled { opacity: .5; cursor:not-allowed; }

.hint { margin-top: 10px; color: var(--muted); font-size: 13px; }

.cats { display:grid; gap: 8px; }
.cat {
  display:flex; justify-content:space-between; align-items:center;
  padding: 10px 12px; border:1px solid var(--line); border-radius: 12px;
  background:#10131a; cursor:pointer;
}
.cat:hover { background:#121827; }
.cat .name { font-weight: 700; }
.cat .score { color: var(--muted); }

.scorecard { display:grid; gap: 8px; }
.row { display:flex; justify-content:space-between; padding: 8px 10px; border-bottom:1px dashed #2a2f3a; }
.row:last-child { border-bottom:none; }
.row .k { color: var(--muted); }
.row .v { font-weight: 700; }

.screen { }
.hidden { display:none; }

.h1 { margin: 0 0 8px; font-size: 24px; }
.muted { color: var(--muted); margin: 8px 0 0; }

.battleGrid{
  display:grid;
  gap:16px;
  grid-template-columns: 1fr;
}
@media (min-width: 960px){
  .battleGrid{ grid-template-columns: 1fr 1fr; }
  .battleGrid > .panel:last-child { grid-column: 1 / -1; }
}

.banner{
  margin: 6px 0 10px;
  padding: 8px 10px;
  border:1px solid var(--line);
  border-radius: 12px;
  background:#10131a;
  color: var(--muted);
  font-size: 13px;
}

.legend{
  margin-top: 10px;
  padding: 10px 12px;
  border:1px solid var(--line);
  border-radius: 12px;
  background:#10131a;
}
.legendTitle{ color: var(--muted); font-size: 12px; margin-bottom: 6px; }
.legendBody{ font-size: 13px; line-height: 1.5; }

/* topbar nav */
.topbar { display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid var(--line); position:sticky; top:0; background:rgba(15,17,21,.95); backdrop-filter: blur(8px); }
.topbar .right { display:flex; gap:10px; align-items:center; }
.topLink { padding:8px 10px; border:1px solid var(--line); border-radius: 12px; background:#10131a; color:var(--fg); cursor:pointer; font-size: 13px; }
.topLink:hover { background:#121827; }

.roundBig{
  font-size: 22px;
  font-weight: 900;
  padding: 10px 12px;
  border:1px solid var(--line);
  border-radius: 14px;
  background:#10131a;
  margin-bottom: 10px;
}

.turnBox{
  border:1px solid var(--line);
  border-radius: 14px;
  background:#10131a;
  padding: 12px;
}
.turnTitle{ color: var(--muted); font-size: 13px; margin-bottom: 10px; }
.turnLine{ color: var(--muted); font-size: 13px; margin-top: 10px; }

.rulesGrid{ display:grid; gap:10px; margin-top: 10px; }
.ruleItem{ padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#10131a; }
.ruleItem .name{ font-weight: 800; }
.ruleItem .desc{ color: var(--muted); font-size: 13px; margin-top: 4px; }
.ruleItem .note{ color: var(--muted); font-size: 12px; margin-top: 6px; }

/* ç”»é¢åˆ¶å¾¡ï¼šscreenã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéè¡¨ç¤ºã€activeã ã‘è¡¨ç¤º */
.screen { display: none !important; }
.screen.active { display: block !important; }

/* battleã®ã¨ãã ã‘ grid ã«ãªã‚‹ */
.screen.battleGrid.active{
  display:grid !important;
  gap:16px;
  grid-template-columns: 1fr;
}
@media (min-width: 960px){
  .screen.battleGrid.active{ grid-template-columns: 1fr 1fr; }
  .screen.battleGrid.active > .panel:last-child { grid-column: 1 / -1; }
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ã¯å¿…è¦ãªæ™‚ã ã‘è¡¨ç¤º */
.topbar.hidden { display:none !important; }

.die img.dieImg{
  width: 52px;
  height: 52px;
  image-rendering: auto;
  user-select: none;
  pointer-events: none;
}

/* æŠ¼ã—ãŸæ„Ÿã˜ + HOLDå¼·èª¿ */
.die{
  position: relative;
  transition: transform 0.06s ease, box-shadow 0.06s ease, filter 0.06s ease;
  box-shadow: 0 6px 0 rgba(0,0,0,0.20);
}

/* æŠ¼ä¸‹ã§æ²ˆã‚€ */
.die:active{
  transform: translateY(3px);
  box-shadow: 0 3px 0 rgba(0,0,0,0.18);
  filter: brightness(0.98);
}

/* HOLDã¯æ ã‚’æ¿ƒãï¼‹ãƒ”ãƒ³è¡¨ç¤º */
.die.held{
  outline: 3px solid rgba(0,0,0,0.85);
  outline-offset: 2px;
}

.die.held::after{
  content: "ğŸ“Œ";
  position: absolute;
  top: -6px;
  right: -6px;
  width: 22px;
  height: 22px;
  display: grid;
  place-items: center;
  background: #fff;
  border: 2px solid #000;
  border-radius: 999px;
  font-size: 13px;
}

.diceExample{
  display:flex;
  gap:6px;
  margin-top:8px;
  flex-wrap:wrap;
}
.die.ex{
  box-shadow:none;
  outline:none;
}
.die.ex img.dieImg{
  width:34px;
  height:34px;
}

.cat.weak {
  opacity: 0.55;
}

.cat.best{
  transform: translateY(-1px);
  box-shadow: 0 8px 0 rgba(0,0,0,0.22);
}

/* --- Mobile tap targets --- */
button, .btn, .topLink{
  min-height: 44px;
  padding: 10px 14px;
  font-size: 16px;
}

.cat{
  min-height: 56px;
  padding: 12px 14px;
}

.die{
  width: 68px;   /* æ—¢ã«å›ºå®šãªã‚‰å¥½ã¿ã§ */
  height: 68px;
}

.dieImg{
  width: 56px;
  height: 56px;
}

@media (max-width: 480px){
  .catsGrid, #cats{
    gap: 10px;
  }
  .diceRow{
    gap: 10px;
  }
  .turnTitle{
    font-size: 18px;
  }
}

/* --- Keep 5 dice in one row on small screens --- */
.diceRow,
.diceExample{
  display: flex;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

/* diceRow/Exampleå†…ã®å„ãƒ€ã‚¤ã‚¹ãŒç¸®ã‚€ã®ã‚’è¨±å¯ */
.diceRow .die,
.diceExample .die{
  flex: 1 1 0;
  min-width: 0;
}

/* ç”»åƒã‚‚æ ã«åã¾ã‚‹ã‚ˆã†ã« */
.diceRow .dieImg,
.diceExample .dieImg{
  width: 100%;
  height: auto;
  max-width: 56px;  /* å¥½ã¿ã§ 52ã€œ60 */
}

html, body{
  overflow-x: hidden;
}

/* 100vwç”±æ¥ã®ã¯ã¿å‡ºã—ã‚’å›é¿ */
*{
  box-sizing: border-box;
}

img{
  max-width: 100%;
  height: auto;
}

/* ç”»é¢å¹…ã«åã‚ã‚‹ */
#app, .screen{
  width: 100%;
  max-width: 100%;
}
